# Álgebra y Cálculo Relacional

## 1.- El Lenguaje

Para comunicarse con una base de datos, es necesario definir un _lenguaje de manipulación de datos_ para interactuar con la información contenida en el modelo. Existen dos tipos de lenguajes de uso común. Los **procedurales** nos permiten indicar una seria de _operaciones_ a seguir paso a paso. Los **declarativos**, en cambio, nos dejan definir un _resultado_ a alcanzar, sin especificar cómo llegar a él.

Los lenguajes formales que se definen sobre el modelo relacional son el **álgebra relacional** (procedural) y el **cálculo relacional** (declarativo). Actualmente, el lenguaje más popular es por lejos SQL, que es declarativo.

## 2.- Aĺgebra relacional

El _álgebra relacional_ es un lenguaje procedural que provee un marco operacional para el modelo de relaciones. Define los procedimientos de consulta en base a un _conjunto de operaciones_, que reciben relaciones y devuelven otra relación (**O: R~1~ x R~2~ x ... x R~n~ → S**). Como las operaciones reciben relaciones de entrada y producen relaciones como salida, se pueden encadenar para lograr resultados más complejos.

Las operaciones más comunes son:

### A.- Selección

El operador de selección **[sigma]** es un operador unario **[fórmula]** que dada una relación **R(A~1~, A~2~, ..., A~n~)** devuelve aquellas tuplas para las cuales la condición es verdadera.

La condición se construye a partir de otras condiciones atómicas del tipo **A~i~ [op] A~j~** ó **A~i~ [op] c, c [in] Dom(A~i~)**, donde _[op]_ es un operador de comparación (>, <, ≥, ≤ para dominios ordenados, =, ≠ para todo dominio). Estas condiciones se pueden combinar conlos operadores lógicos _And ([and]), Or ([or])_ y _Not ([not])_.

### B.- Proyección

El operador de proyección **[pi]** es un operador unario **[fórmula]** que dada una relación **R(A~1~, A~2~, ..., A~n~)** y una _lista de atributos_ **L = (L~1~, L~2~, ..., L~k~)** devuelve una relación cuyas tuplas representan los valores posibles de _L_ en _R_.

Podemos pensar que la operación _proyecta_ **R** a un espacio de dimensión **k**, donde sólo tiene los atributos de **L**. Cabe aclarar que, como formalmente la proyección _siempre devuelve una relación válida_, puede llegar a _remover duplicados_ de ser necesario. En _SQL_ el comportamiento default es conservar los repetidos, y se debe explicitar si se quieren eliminar.

### C.- Asignación y Redenominación

El operador de redenominación **ρ** es un operador unario que dada una relación **R(A~1~, A~2~, ..., A~n~)**, un nuevo nombre de relación **S** y una lista de n nombres de atributo **(B~1~, B~2~, ..., B~n~)**, produce una relación de nombre **S** y atributos **(B~1~, B~2~, ..., B~n~)** cuyas tuplas coinciden con las tuplas de **R**. En términos sencillos, renombra relaciones y columnas.

El operador de asignación **←** simplemente guarda la relación resultante de una operación para ser referenciada fácilmente más adelante.

### D.- Operaciones de conjuntos

Si tomamos 2 relaciones **R(A~1~, A~2~, ..., A~n~)** y **S(B~1~, B~2~, ..., B~n~)** como si fueran _conjuntos de tuplas_, podemos definir las operaciones básicas de conjuntos sobre ellas: **R [un] S**, **R [in] S**, y **R - S**. Las tres devuelven una relación **T(C~1~, C~2~, ..., C~n~)** y funcionan como es de esperar de las operaciones algebraicas entre conjuntos: la unión devuelve todas las tuplas en _cualquiera de las dos_, la intersección las que están _en ambas_, y la resta las que están en _la primera pero no en la segunda_.

Para que están bien definidas estas operaciones, se deben cumplir 2 requisitos entre **R** y **S**. En primer lugar, deben tener el _mismo grado_ (cant. de atributos). Además, esos atributos deben tener _compatibilidad de tipos_, es decir, los dominios de los atributos deben ser _iguales_ para cada uno (**Dom(A~i~) = Dom(B~i~) [fa] i [in] {1, ..., n}**).
